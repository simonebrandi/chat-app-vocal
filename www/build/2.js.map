{"version":3,"sources":["../../src/pages/user-info/user-info.module.ts","../../src/pages/user-info/user-info.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { UserInfoPage } from './user-info';\n\n@NgModule({\n  declarations: [\n    UserInfoPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(UserInfoPage),\n  ],\n})\nexport class UserInfoPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/user-info/user-info.module.ts","import { Component } from '@angular/core';\nimport { NavController, NavParams, ModalController, AlertController, IonicPage } from 'ionic-angular';\nimport { DataProvider } from '../../providers/data';\nimport { LoadingProvider } from '../../providers/loading';\nimport { FirebaseProvider } from '../../providers/firebase';\nimport { MessagePage } from '../message/message';\nimport * as firebase from 'firebase';\n\n@IonicPage()\n@Component({\n  selector: 'page-user-info',\n  templateUrl: 'user-info.html'\n})\nexport class UserInfoPage {\n  private user: any;\n  private userId: any;\n  private friendRequests: any;\n  private requestsSent: any;\n  private friends: any;\n  private alert: any;\n  // UserInfoPage\n  // This is the page where the user can view user information, and do appropriate actions based on their relation to the current logged in user.\n  constructor(public navCtrl: NavController, public navParams: NavParams, public modalCtrl: ModalController, public dataProvider: DataProvider,\n    public loadingProvider: LoadingProvider, public alertCtrl: AlertController, public firebaseProvider: FirebaseProvider) { }\n\n  ionViewDidLoad() {\n    this.userId = this.navParams.get('userId');\n    console.log(this.userId);\n    this.loadingProvider.show();\n    // Get user info.\n    this.dataProvider.getUser(this.userId).snapshotChanges().subscribe((user) => {\n      this.user = { $key: user.key, ...user.payload.val()};\n      console.log(this.user);\n      this.loadingProvider.hide();\n    });\n    // Get friends of current logged in user.\n    this.dataProvider.getUser(firebase.auth().currentUser.uid).snapshotChanges().subscribe((user) => {\n      this.friends = user.payload.val().friends;\n    });\n    // Get requests of current logged in user.\n    this.dataProvider.getRequests(firebase.auth().currentUser.uid).snapshotChanges().subscribe((requests) => {\n      console.log(requests.payload.val())\n      if(requests.payload.val() != null){\n        this.friendRequests = requests.payload.val().friendRequests;\n        this.requestsSent = requests.payload.val().requestsSent;\n      }\n    });\n  }\n\n  block(){\n    console.log(\"block function\");\n    firebase.database().ref('accounts/'+firebase.auth().currentUser.uid+'/conversations/'+this.userId).update({\n      blocked: true\n    });\n\n  }\n\n  // Enlarge user's profile image.\n  enlargeImage(img) {\n    let imageModal = this.modalCtrl.create(\"ImageModalPage\", { img: img });\n    imageModal.present();\n  }\n\n  // Accept friend request.\n  acceptFriendRequest() {\n    this.alert = this.alertCtrl.create({\n      title: 'Confirm Friend Request',\n      message: 'Do you want to accept <b>' + this.user.name + '</b> as your friend?',\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: data => { }\n        },\n        {\n          text: 'Accept',\n          handler: () => {\n            this.firebaseProvider.acceptFriendRequest(this.userId);\n          }\n        }\n      ]\n    }).present();\n  }\n\n  // Deny friend request.\n  rejectFriendRequest() {\n    this.alert = this.alertCtrl.create({\n      title: 'Reject Friend Request',\n      message: 'Do you want to reject <b>' + this.user.name + '</b> as your friend?',\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: data => { }\n        },\n        {\n          text: 'Reject',\n          handler: () => {\n            this.firebaseProvider.deleteFriendRequest(this.userId);\n          }\n        }\n      ]\n    }).present();\n  }\n\n  // Cancel friend request sent.\n  cancelFriendRequest() {\n    this.alert = this.alertCtrl.create({\n      title: 'Friend Request Pending',\n      message: 'Do you want to delete your friend request to <b>' + this.user.name + '</b>?',\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: data => { }\n        },\n        {\n          text: 'Delete',\n          handler: () => {\n            this.firebaseProvider.cancelFriendRequest(this.userId);\n          }\n        }\n      ]\n    }).present();\n  }\n\n  // Send friend request.\n  sendFriendRequest() {\n    this.alert = this.alertCtrl.create({\n      title: 'Send Friend Request',\n      message: 'Do you want to send friend request to <b>' + this.user.name + '</b>?',\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: data => { }\n        },\n        {\n          text: 'Send',\n          handler: () => {\n            this.firebaseProvider.sendFriendRequest(this.userId);\n          }\n        }\n      ]\n    }).present();\n  }\n\n  // Open chat with this user.\n  sendMessage() {\n    this.navCtrl.push(MessagePage, { userId: this.userId });\n  }\n\n  // Check if user can be added, meaning user is not yet friends nor has sent/received any friend requests.\n  canAdd() {\n    if (this.friendRequests) {\n      if (this.friendRequests.indexOf(this.userId) > -1) {\n        return false;\n      }\n    }\n    if (this.requestsSent) {\n      if (this.requestsSent.indexOf(this.userId) > -1) {\n        return false;\n      }\n    }\n    if (this.friends) {\n      if (this.friends.indexOf(this.userId) > -1) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/user-info/user-info.ts"],"sourceRoot":""}